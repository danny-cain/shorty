<p><span style="text-decoration: underline;"><strong>Initialisation</strong></span></p>
<p>Shorty initialisation is performed by the initialise.php script in /public.&nbsp; This script begins with a mini bootstrap that includes the library (either from direct source or from .phar) and register's the autoloader.&nbsp; You then call ShortyInit::Initialise passing in an array of objects that require dependency injection.&nbsp; The initialisation script creates an instance of BaseBootstrap, passes an instance of ShortyConfiguration to it then calls executeBootstrap passing in the array of dependent objects.&nbsp; The ShortyConfiguration holds basic configuration data (database connection details, SMTP details etc), the data is usually loaded from a JSON file.&nbsp; The bootstrap instance will set up the environment.&nbsp; </p>
<p>&nbsp;</p>
<p><span style="text-decoration: underline;"><strong>Bootstrap</strong></span></p>
<p>The bootstrap class (BaseBootstrap) set's up the Shorty Environment.&nbsp; It begins be creating a dependency injector and a dependencyInjectorFactory. The dependencyInjectorFactory creates objects to fulfill dependencies as and when they are needed. Once the dependencies have been registered it triggers the "RegisterDataObjects" event, allowing components to register their data mappers, then does a data structure check, calls the bootstrap complete event and finishes by applying dependencies to the objects that were passed in.</p>
<p>&nbsp;</p>
<p><span style="text-decoration: underline;"><strong>DependencyInjector</strong></span></p>
<p>The dependency Injector uses interfaces to inject dependencies into objects.&nbsp; The DependencyFactory has a getInterfaces method which returns an array of ConsumerInterfaces (usually called xxxConsumer), these are registered in the DependencyInjector.&nbsp; The applyDependencies method of the DependencyInjector will loop through all the registered interfaces and, if the passed in object implements that interface, it calls the factory to create an instance of the object which is passed to the consume* method of the dependenct object.</p>
<p>&nbsp;</p>
<p><span style="text-decoration: underline;"><strong>DependencyFactory</strong></span></p>
<p>This class handles creating, initialising and maintaining dependencies.&nbsp; The getInterfaces method returns an array of consumer interface names.&nbsp; The createInstance method accepts an interfaceName as a parameter and returns an object to fulfil that dependency (or null).&nbsp; The DependencyFactory is responsible for maintaining the reference as well if necessary.</p>
<p>&nbsp;</p>
<p><span style="text-decoration: underline;"><strong>Modules</strong></span></p>
<p>For an example of how modules work, see the existing examples in (/classes/cannydain/shortymodules), each module needs a class that extends ShortyModule.&nbsp; Modules are loaded in the DependencyFactory (in the _factory_modules() method).&nbsp; The default shorty router uses direct controller mapping (i.e. each controller is accessible by replacing the "/"'s in the name with -'s to get a sanitised name, the url is then /&lt;sanitised-controller-name&gt;/method/param1/param2....</p>
<p>&nbsp;</p>